EESchema Schematic File Version 2
LIBS:power
LIBS:device
LIBS:transistors
LIBS:conn
LIBS:linear
LIBS:regul
LIBS:74xx
LIBS:cmos4000
LIBS:adc-dac
LIBS:memory
LIBS:xilinx
LIBS:microcontrollers
LIBS:dsp
LIBS:microchip
LIBS:analog_switches
LIBS:motorola
LIBS:texas
LIBS:intel
LIBS:audio
LIBS:interface
LIBS:digital-audio
LIBS:philips
LIBS:display
LIBS:cypress
LIBS:siliconi
LIBS:opto
LIBS:atmel
LIBS:contrib
LIBS:valves
LIBS:Symbols_Microcontroller_Philips-NXP_RevA_06Oct2013
LIBS:nordicsemi
LIBS:Egert
LIBS:Oscillators
LIBS:BleTouchDimmer-cache
EELAYER 25 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 1 4
Title ""
Date ""
Rev ""
Comp ""
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
$Comp
L Crystal Y2
U 1 1 57952961
P 3650 3750
F 0 "Y2" H 3650 3900 50  0000 C CNN
F 1 "Crystal" H 3650 3600 50  0000 C CNN
F 2 "EgertKiCad_lib:Crystal_ECX-31B" H 3650 3750 50  0001 C CNN
F 3 "http://www.mouser.com/ds/2/122/ecx-31b-15952.pdf" H 3650 3750 50  0001 C CNN
F 4 "http://www.mouser.ee/ProductDetail/ECS/ECS-327-125-34B-TR/?qs=sGAEpiMZZMvzziJrs9%252bUWUMjcDbm9QqG" H 3650 3750 60  0001 C CNN "Ordering"
	1    3650 3750
	0    -1   -1   0   
$EndComp
Wire Wire Line
	3850 3800 3850 3900
Wire Wire Line
	3850 3900 3650 3900
Wire Wire Line
	3850 3700 3850 3600
Wire Wire Line
	3850 3600 3650 3600
$Comp
L C C3
U 1 1 579553C4
P 3400 4100
F 0 "C3" H 3425 4200 50  0000 L CNN
F 1 "22pF" H 3425 4000 50  0000 L CNN
F 2 "Capacitors_SMD:C_0805" H 3438 3950 50  0001 C CNN
F 3 "" H 3400 4100 50  0000 C CNN
	1    3400 4100
	0    -1   -1   0   
$EndComp
$Comp
L C C4
U 1 1 57955410
P 3400 3550
F 0 "C4" H 3425 3650 50  0000 L CNN
F 1 "22pF" H 3425 3450 50  0000 L CNN
F 2 "Capacitors_SMD:C_0805" H 3438 3400 50  0001 C CNN
F 3 "" H 3400 3550 50  0000 C CNN
	1    3400 3550
	0    -1   -1   0   
$EndComp
Wire Wire Line
	3550 4100 3650 4100
Wire Wire Line
	3650 4100 3650 3900
Wire Wire Line
	3550 3550 3650 3550
Wire Wire Line
	3650 3550 3650 3600
$Comp
L GND #PWR01
U 1 1 57955487
P 3100 3950
F 0 "#PWR01" H 3100 3700 50  0001 C CNN
F 1 "GND" H 3100 3800 50  0000 C CNN
F 2 "" H 3100 3950 50  0000 C CNN
F 3 "" H 3100 3950 50  0000 C CNN
	1    3100 3950
	1    0    0    -1  
$EndComp
Wire Wire Line
	3250 3550 3250 4100
Wire Wire Line
	3100 3850 3250 3850
Connection ~ 3250 3850
$Comp
L C C9
U 1 1 57964778
P 3400 3100
F 0 "C9" H 3425 3200 50  0000 L CNN
F 1 "1u" H 3425 3000 50  0000 L CNN
F 2 "Capacitors_SMD:C_0805" H 3438 2950 50  0001 C CNN
F 3 "" H 3400 3100 50  0000 C CNN
	1    3400 3100
	0    1    1    0   
$EndComp
$Comp
L C C7
U 1 1 57965994
P 5000 5650
F 0 "C7" H 5025 5750 50  0000 L CNN
F 1 "1u" H 5025 5550 50  0000 L CNN
F 2 "Capacitors_SMD:C_0805" H 5038 5500 50  0001 C CNN
F 3 "" H 5000 5650 50  0000 C CNN
	1    5000 5650
	1    0    0    -1  
$EndComp
$Comp
L MDBT40 U2
U 1 1 5818CC93
P 5600 3450
F 0 "U2" H 4600 4400 60  0000 L CNN
F 1 "MDBT40" H 5450 4400 60  0000 L CNN
F 2 "EgertKiCad_lib:MDBT40" H 4400 4250 60  0001 C CNN
F 3 "http://www.raytac.com/download/MDBT40/MDBT40%20spec-Version%20A4.pdf" H 4400 4250 60  0001 C CNN
F 4 "http://www.ebay.com/itm/222215052092?_trksid=p2060353.m2749.l2649&ssPageName=STRK%3AMEBIDX%3AIT" H 5600 3450 60  0001 C CNN "Ordering"
	1    5600 3450
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR02
U 1 1 581A3066
P 4250 2800
F 0 "#PWR02" H 4250 2550 50  0001 C CNN
F 1 "GND" H 4250 2650 50  0000 C CNN
F 2 "" H 4250 2800 50  0000 C CNN
F 3 "" H 4250 2800 50  0000 C CNN
	1    4250 2800
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR03
U 1 1 581A31E1
P 6950 2650
F 0 "#PWR03" H 6950 2400 50  0001 C CNN
F 1 "GND" H 6950 2500 50  0000 C CNN
F 2 "" H 6950 2650 50  0000 C CNN
F 3 "" H 6950 2650 50  0000 C CNN
	1    6950 2650
	0    -1   -1   0   
$EndComp
Wire Wire Line
	4400 2650 4250 2650
Wire Wire Line
	4250 2650 4250 2800
Wire Wire Line
	4400 2750 4250 2750
Connection ~ 4250 2750
Wire Wire Line
	3850 3700 4400 3700
Wire Wire Line
	3850 3800 4400 3800
Wire Wire Line
	3100 3850 3100 3950
$Comp
L GND #PWR04
U 1 1 581A7CB9
P 5000 4750
F 0 "#PWR04" H 5000 4500 50  0001 C CNN
F 1 "GND" H 5000 4600 50  0000 C CNN
F 2 "" H 5000 4750 50  0000 C CNN
F 3 "" H 5000 4750 50  0000 C CNN
	1    5000 4750
	1    0    0    -1  
$EndComp
Wire Wire Line
	5000 4550 5000 4750
$Comp
L GND #PWR05
U 1 1 581A7D2A
P 6200 4750
F 0 "#PWR05" H 6200 4500 50  0001 C CNN
F 1 "GND" H 6200 4600 50  0000 C CNN
F 2 "" H 6200 4750 50  0000 C CNN
F 3 "" H 6200 4750 50  0000 C CNN
	1    6200 4750
	1    0    0    -1  
$EndComp
Wire Wire Line
	6200 4550 6200 4750
$Comp
L GND #PWR06
U 1 1 581A884C
P 5000 5900
F 0 "#PWR06" H 5000 5650 50  0001 C CNN
F 1 "GND" H 5000 5750 50  0000 C CNN
F 2 "" H 5000 5900 50  0000 C CNN
F 3 "" H 5000 5900 50  0000 C CNN
	1    5000 5900
	1    0    0    -1  
$EndComp
Wire Wire Line
	5000 5800 5000 5900
$Comp
L GND #PWR07
U 1 1 581ABEA9
P 3100 3200
F 0 "#PWR07" H 3100 2950 50  0001 C CNN
F 1 "GND" H 3100 3050 50  0000 C CNN
F 2 "" H 3100 3200 50  0000 C CNN
F 3 "" H 3100 3200 50  0000 C CNN
	1    3100 3200
	1    0    0    -1  
$EndComp
Wire Wire Line
	3550 3100 4400 3100
Wire Wire Line
	3250 3100 3100 3100
Wire Wire Line
	3100 3100 3100 3200
$Comp
L +3.3V #PWR08
U 1 1 581AC6F3
P 5000 5350
F 0 "#PWR08" H 5000 5200 50  0001 C CNN
F 1 "+3.3V" H 5000 5490 50  0000 C CNN
F 2 "" H 5000 5350 50  0000 C CNN
F 3 "" H 5000 5350 50  0000 C CNN
	1    5000 5350
	1    0    0    -1  
$EndComp
Wire Wire Line
	5000 5350 5000 5500
Wire Wire Line
	5100 4550 5100 5450
Wire Wire Line
	5100 5450 5000 5450
Connection ~ 5000 5450
$Comp
L +3.3V #PWR09
U 1 1 581E4E9B
P 3850 3050
F 0 "#PWR09" H 3850 2900 50  0001 C CNN
F 1 "+3.3V" H 3850 3190 50  0000 C CNN
F 2 "" H 3850 3050 50  0000 C CNN
F 3 "" H 3850 3050 50  0000 C CNN
	1    3850 3050
	1    0    0    -1  
$EndComp
Wire Wire Line
	3850 3050 3850 3100
Connection ~ 3850 3100
NoConn ~ 5200 4550
NoConn ~ 6800 2750
Wire Wire Line
	6800 2650 6950 2650
Wire Wire Line
	6800 3250 7800 3250
Wire Wire Line
	7800 3850 7800 4000
$Comp
L GND #PWR010
U 1 1 581AB091
P 7800 4000
F 0 "#PWR010" H 7800 3750 50  0001 C CNN
F 1 "GND" H 7800 3850 50  0000 C CNN
F 2 "" H 7800 4000 50  0000 C CNN
F 3 "" H 7800 4000 50  0000 C CNN
	1    7800 4000
	1    0    0    -1  
$EndComp
$Comp
L R R1
U 1 1 57962E8D
P 7800 3700
F 0 "R1" V 7880 3700 50  0000 C CNN
F 1 "10k" V 7800 3700 50  0000 C CNN
F 2 "Resistors_SMD:R_0805" V 7730 3700 50  0001 C CNN
F 3 "" H 7800 3700 50  0000 C CNN
	1    7800 3700
	-1   0    0    1   
$EndComp
Text Label 7200 3250 0    60   ~ 0
SWDCLK
Text Label 7550 3350 2    60   ~ 0
SWDIO/RESET
Wire Wire Line
	7800 3250 7800 3550
$Comp
L CONN_01X04 P1
U 1 1 581E8DDA
P 9900 3400
F 0 "P1" H 9900 3650 50  0000 C CNN
F 1 "PROG" V 10000 3400 50  0000 C CNN
F 2 "Socket_Strips:Socket_Strip_Straight_1x04" H 9900 3400 50  0001 C CNN
F 3 "" H 9900 3400 50  0000 C CNN
	1    9900 3400
	1    0    0    -1  
$EndComp
Wire Wire Line
	9000 3250 9700 3250
Wire Wire Line
	9050 3350 9700 3350
Wire Wire Line
	9050 3450 9700 3450
Wire Wire Line
	9000 3550 9700 3550
Text Label 9050 3350 0    60   ~ 0
SWDCLK
Text Label 9050 3450 0    60   ~ 0
SWDIO/RESET
$Comp
L +3.3V #PWR011
U 1 1 581E9153
P 9000 3200
F 0 "#PWR011" H 9000 3050 50  0001 C CNN
F 1 "+3.3V" H 9000 3340 50  0000 C CNN
F 2 "" H 9000 3200 50  0000 C CNN
F 3 "" H 9000 3200 50  0000 C CNN
	1    9000 3200
	1    0    0    -1  
$EndComp
Wire Wire Line
	9000 3200 9000 3250
$Comp
L GND #PWR012
U 1 1 581E91BB
P 9000 3600
F 0 "#PWR012" H 9000 3350 50  0001 C CNN
F 1 "GND" H 9000 3450 50  0000 C CNN
F 2 "" H 9000 3600 50  0000 C CNN
F 3 "" H 9000 3600 50  0000 C CNN
	1    9000 3600
	1    0    0    -1  
$EndComp
Wire Wire Line
	9000 3600 9000 3550
Wire Notes Line
	8750 2750 8750 3950
Wire Notes Line
	8750 3950 10200 3950
Wire Notes Line
	10200 3950 10200 2750
Wire Notes Line
	10200 2750 8750 2750
Text Notes 8800 2850 0    60   ~ 0
PROG/DEBUG
$Comp
L CONN_01X04 P2
U 1 1 581EB0DF
P 10250 4950
F 0 "P2" H 10250 5200 50  0000 C CNN
F 1 "UART" V 10350 4950 50  0000 C CNN
F 2 "Socket_Strips:Socket_Strip_Straight_1x04" H 10250 4950 50  0001 C CNN
F 3 "" H 10250 4950 50  0000 C CNN
	1    10250 4950
	1    0    0    -1  
$EndComp
Wire Wire Line
	9000 4900 10050 4900
Wire Wire Line
	10050 5000 9200 5000
Text Label 9200 4900 0    60   ~ 0
RX
Text Label 9200 5000 0    60   ~ 0
TX
$Comp
L GND #PWR013
U 1 1 581EB2A9
P 9200 5150
F 0 "#PWR013" H 9200 4900 50  0001 C CNN
F 1 "GND" H 9200 5000 50  0000 C CNN
F 2 "" H 9200 5150 50  0000 C CNN
F 3 "" H 9200 5150 50  0000 C CNN
	1    9200 5150
	1    0    0    -1  
$EndComp
Wire Wire Line
	10050 5100 9200 5100
Wire Wire Line
	9200 5100 9200 5150
Wire Wire Line
	10050 4800 9200 4800
$Comp
L +3.3V #PWR014
U 1 1 581EB479
P 9200 4750
F 0 "#PWR014" H 9200 4600 50  0001 C CNN
F 1 "+3.3V" H 9200 4890 50  0000 C CNN
F 2 "" H 9200 4750 50  0000 C CNN
F 3 "" H 9200 4750 50  0000 C CNN
	1    9200 4750
	1    0    0    -1  
$EndComp
Wire Wire Line
	9200 4800 9200 4750
Text Label 9450 4800 0    60   ~ 0
3V3
Text Label 9150 3250 0    60   ~ 0
3V3
Text Notes 8800 4250 0    60   ~ 0
UART
Wire Wire Line
	6800 3750 7550 3750
Wire Wire Line
	6800 3850 7550 3850
Text Label 7550 3750 2    60   ~ 0
TX
Text Label 7550 3850 2    60   ~ 0
RX
$Comp
L R R3
U 1 1 581ED91F
P 9000 4700
F 0 "R3" V 9080 4700 50  0000 C CNN
F 1 "10k" V 9000 4700 50  0000 C CNN
F 2 "Resistors_SMD:R_0805" V 8930 4700 50  0001 C CNN
F 3 "" H 9000 4700 50  0000 C CNN
	1    9000 4700
	-1   0    0    1   
$EndComp
Wire Wire Line
	9000 4850 9000 4900
$Comp
L +3.3V #PWR015
U 1 1 581EE473
P 9000 4500
F 0 "#PWR015" H 9000 4350 50  0001 C CNN
F 1 "+3.3V" H 9000 4640 50  0000 C CNN
F 2 "" H 9000 4500 50  0000 C CNN
F 3 "" H 9000 4500 50  0000 C CNN
	1    9000 4500
	1    0    0    -1  
$EndComp
Wire Wire Line
	9000 4500 9000 4550
Wire Notes Line
	8750 4150 8750 5450
Wire Notes Line
	8750 5450 10450 5450
Wire Notes Line
	10450 5450 10450 4150
Wire Notes Line
	10450 4150 8750 4150
Wire Wire Line
	7550 3350 6800 3350
$Comp
L R R4
U 1 1 581F1BD4
P 6900 4500
F 0 "R4" V 6980 4500 50  0000 C CNN
F 1 "100R" V 6900 4500 50  0000 C CNN
F 2 "Resistors_SMD:R_0805" V 6830 4500 50  0001 C CNN
F 3 "" H 6900 4500 50  0000 C CNN
	1    6900 4500
	-1   0    0    1   
$EndComp
Wire Wire Line
	6900 4350 6900 4250
Wire Wire Line
	6900 4250 6800 4250
$Comp
L LED D1
U 1 1 581F1C9A
P 6900 4950
F 0 "D1" H 6900 5050 50  0000 C CNN
F 1 "LED" H 6900 4850 50  0000 C CNN
F 2 "LEDs:LED_0805" H 6900 4950 50  0001 C CNN
F 3 "" H 6900 4950 50  0000 C CNN
	1    6900 4950
	0    -1   -1   0   
$EndComp
Wire Wire Line
	6900 4650 6900 4750
$Comp
L GND #PWR016
U 1 1 581F1D57
P 6900 5250
F 0 "#PWR016" H 6900 5000 50  0001 C CNN
F 1 "GND" H 6900 5100 50  0000 C CNN
F 2 "" H 6900 5250 50  0000 C CNN
F 3 "" H 6900 5250 50  0000 C CNN
	1    6900 5250
	1    0    0    -1  
$EndComp
Wire Wire Line
	6900 5150 6900 5250
Wire Wire Line
	5500 4550 5500 5250
Text Label 5500 5250 1    60   ~ 0
ZC_DETECT
$Sheet
S 5450 6550 900  550 
U 581F3B6C
F0 "ZC_DETECT" 60
F1 "ZC_DETECT.sch" 60
F2 "ZC_DETECT" I L 5450 6950 60 
F3 "ZC_Line" I R 6350 6650 60 
F4 "ZC_N" I R 6350 6800 60 
$EndSheet
Wire Wire Line
	4900 6950 5450 6950
Text Label 4900 6950 0    60   ~ 0
ZC_DETECT
$Comp
L PWR_FLAG #FLG017
U 1 1 581FAA9C
P 10450 850
F 0 "#FLG017" H 10450 945 50  0001 C CNN
F 1 "PWR_FLAG" H 10450 1030 50  0000 C CNN
F 2 "" H 10450 850 50  0000 C CNN
F 3 "" H 10450 850 50  0000 C CNN
	1    10450 850 
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR018
U 1 1 581FAAED
P 10450 1150
F 0 "#PWR018" H 10450 900 50  0001 C CNN
F 1 "GND" H 10450 1000 50  0000 C CNN
F 2 "" H 10450 1150 50  0000 C CNN
F 3 "" H 10450 1150 50  0000 C CNN
	1    10450 1150
	1    0    0    -1  
$EndComp
$Comp
L +3.3V #PWR019
U 1 1 581FAB37
P 10800 850
F 0 "#PWR019" H 10800 700 50  0001 C CNN
F 1 "+3.3V" H 10800 990 50  0000 C CNN
F 2 "" H 10800 850 50  0000 C CNN
F 3 "" H 10800 850 50  0000 C CNN
	1    10800 850 
	1    0    0    -1  
$EndComp
$Comp
L PWR_FLAG #FLG020
U 1 1 581FAB81
P 10800 1100
F 0 "#FLG020" H 10800 1195 50  0001 C CNN
F 1 "PWR_FLAG" H 10800 1280 50  0000 C CNN
F 2 "" H 10800 1100 50  0000 C CNN
F 3 "" H 10800 1100 50  0000 C CNN
	1    10800 1100
	-1   0    0    1   
$EndComp
Wire Wire Line
	10800 850  10800 1100
Wire Wire Line
	10450 850  10450 1150
NoConn ~ 5300 4550
NoConn ~ 5400 4550
NoConn ~ 5600 4550
NoConn ~ 5700 4550
NoConn ~ 5800 4550
NoConn ~ 5900 4550
NoConn ~ 6000 4550
NoConn ~ 6100 4550
NoConn ~ 6800 2850
NoConn ~ 6800 2950
NoConn ~ 6800 3050
NoConn ~ 6800 3150
NoConn ~ 6800 3450
NoConn ~ 6800 3550
NoConn ~ 6800 3650
NoConn ~ 6800 3950
NoConn ~ 6800 4050
NoConn ~ 6800 4150
NoConn ~ 4400 4000
NoConn ~ 4400 3900
NoConn ~ 4400 3600
NoConn ~ 4400 3500
NoConn ~ 4400 3400
NoConn ~ 4400 3300
NoConn ~ 4400 3200
$Sheet
S 9350 2200 800  300 
U 58210545
F0 "Reset" 60
F1 "Reset.sch" 60
F2 "SWDIO/RESET" I L 9350 2350 60 
$EndSheet
$Sheet
S 2700 5350 1250 850 
U 58212355
F0 "TRIACS" 60
F1 "TRIACS.sch" 60
F2 "TRIAC1_CONTROL" I L 2700 5450 60 
F3 "230VAC_L" I R 3950 5750 60 
F4 "TRIAC1_L_OUT" I R 3950 5900 60 
F5 "TRIAC2_CONTROL" I L 2700 5600 60 
F6 "TRIAC2_L_OUT" I R 3950 6050 60 
$EndSheet
$Comp
L CONN_01X04 P3
U 1 1 5823D05F
P 1950 4100
F 0 "P3" H 1950 4350 50  0000 C CNN
F 1 "POWER" V 2050 4100 50  0000 C CNN
F 2 "Terminal_Blocks:TerminalBlock_Pheonix_MKDS1.5-4pol" H 1950 4100 50  0001 C CNN
F 3 "http://www.mouser.com/ds/2/418/NG_CD_282837_G3-625767.pdf" H 1950 4100 50  0001 C CNN
F 4 "http://www.mouser.ee/ProductDetail/TE-Connectivity/282837-4/?qs=sGAEpiMZZMvZTcaMAxB2AJ%2f79sE4hFAYNPaLlOiyu2A%3d" H 1950 4100 60  0001 C CNN "Ordering"
	1    1950 4100
	-1   0    0    -1  
$EndComp
Text Notes 1100 1800 0    60   Italic 12
TODO\nPOWERSUPPLY\nPROTECTION\nENCODER/TOUCHWHEEL
Text Notes 1050 2200 0    60   Italic 12
http://electronics.stackexchange.com/questions/101818/surface-mount-transformerless-230v-to-3-3v-on-a-small-board
Text Notes 1050 2350 0    60   Italic 12
http://electronics.stackexchange.com/questions/67295/converting-universal-ac-to-3-3v-dc-0-1a
Text Notes 1000 2500 0    60   Italic 12
http://www.promelec.ru/pdf/lnk501.pdf
Text Notes 1100 2050 0    60   Italic 12
http://www.mouser.ee/Semiconductors/Power-Management-ICs/AC-DC-Converters/_/N-64puj/?Ns=Pricing|0
Text Notes 3100 1200 0    60   ~ 0
http://www.mouser.com/ds/2/328/linkswitch-4_family_datasheet-537370.pdf
Text Notes 3200 1400 0    60   ~ 0
http://www.mouser.ee/ProductDetail/Power-Integrations/LNK4002S-TL/?qs=sGAEpiMZZMvzv9EAOJZmO0dg70J8dH5iUaCijAFdjy8%3d
$EndSCHEMATC
